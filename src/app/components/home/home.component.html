<div class="dashboard-container">
  <!-- Loading State -->
  <app-loading 
    *ngIf="loading"
    type="spinner"
    size="lg"
    text="Loading dashboard..."
    [overlay]="true">
  </app-loading>
  
  <!-- Error State - Only show for actual API errors -->
  <div *ngIf="hasDataError && error" class="alert alert-danger m-3 d-flex align-items-center justify-content-between" role="alert">
    <div>
      <i class="fas fa-exclamation-triangle me-2"></i>
      {{ error }}
    </div>
    <div class="d-flex align-items-center gap-2">
      <button type="button" class="btn btn-outline-light btn-sm me-2" (click)="refreshData()">
        <i class="fas fa-redo me-1"></i> Retry
      </button>
      <button type="button" class="btn-close" (click)="error = null; hasDataError = false"></button>
    </div>
  </div>
  
  <!-- Welcome Section -->
  <div class="welcome-section">
    <div class="welcome-content">
      <h1 class="welcome-title">Welcome back!</h1>
      <p class="welcome-subtitle">Ready to crush your fitness goals today?</p>
      <div class="welcome-date">{{ today | date: 'EEEE, MMMM d, y' }}</div>
    </div>
    <div class="welcome-illustration">
      <i class="fas fa-dumbbell"></i>
    </div>
  </div>

  <!-- Quick Actions - Always visible for navigation -->
  <div class="quick-actions-section">
    <div class="quick-actions-grid">
      <div 
        *ngFor="let action of quickActions" 
        class="quick-action-card"
        (click)="navigateToRoute(action.route)">
        <div class="action-icon" [ngClass]="'action-icon-' + action.color">
          <i [class]="action.icon"></i>
        </div>
        <div class="action-content">
          <h4 class="action-title">{{ action.label }}</h4>
          <p class="action-description">{{ action.description }}</p>
        </div>
        <div class="action-arrow">
          <i class="fas fa-arrow-right"></i>
        </div>
      </div>
    </div>
  </div>

  <!-- Dashboard Cards Layout -->
  <div class="dashboard-cards-grid row g-4 mt-2">
    <!-- Calendar Card -->
    <div class="col-12 col-lg-6">
      <div class="dashboard-card calendar-card">
        <div class="card-header">
          <h5 class="card-title mb-0"><i class="fas fa-calendar me-2"></i> Calendar</h5>
        </div>
        <div class="calendar-container mt-3">
          <app-calander></app-calander>
        </div>
      </div>
    </div>
    <!-- Programs Card (moved up) -->
    <div class="col-12 col-xl-6">
      <div class="dashboard-card programs-card">
        <div class="card-header">
          <h5 class="card-title mb-0"><i class="fas fa-dumbbell me-2"></i> Programs</h5>
        </div>
        <div class="programs-content mt-3">
          <app-programs></app-programs>
        </div>
      </div>
    </div>
    <!-- Logs List Card -->
    <div class="col-12 col-xl-6">
      <div class="dashboard-card logs-card">
        <div class="card-header">
          <h5 class="card-title mb-0"><i class="fas fa-clipboard-list me-2"></i> Workout Logs</h5>
        </div>
        <div class="logs-content mt-3">
          <app-log></app-log>
        </div>
      </div>
    </div>
  </div>
</div>
