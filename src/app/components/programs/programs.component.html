<div class="programs-page">
  <!-- Breadcrumb Navigation -->
  <app-breadcrumb *ngIf="showBreadcrumbs"></app-breadcrumb>
  
  <!-- Page Header -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">Your Programs</h1>
      <p class="page-subtitle">Manage and organize your workout programs</p>
    </div>
    <button class="btn btn-fitness" (click)="createNewProgram()">
      <i class="fas fa-plus me-2"></i>
      Create New Program
    </button>
  </div>

  <!-- Filters and Search -->
  <div class="filters-section" *ngIf="!loading && filteredPrograms.length > 0">
    <div class="search-container">
      <div class="input-group">
        <span class="input-group-text">
          <i class="fas fa-search"></i>
        </span>
        <input 
          type="text" 
          class="form-control" 
          placeholder="Search programs..."
          [(ngModel)]="searchTerm"
          (input)="onSearchChange()">
      </div>
    </div>
    
    <div class="filter-controls">
      <select 
        class="form-select" 
        [(ngModel)]="selectedCategory"
        (change)="onCategoryChange()">
        <option value="all">All Categories</option>
        <option value="strength">Strength Training</option>
        <option value="cardio">Cardio</option>
        <option value="flexibility">Flexibility</option>
        <option value="hiit">HIIT</option>
        <option value="yoga">Yoga</option>
        <option value="mixed">Mixed</option>
      </select>
      
    </div>
  </div>

  <!-- Programs Grid -->
  <div class="programs-content">
    <app-loading 
      *ngIf="loading"
      type="skeleton"
      size="lg"
      text="Loading programs..."
      [overlay]="false">
    </app-loading>

    <div *ngIf="!loading && filteredPrograms.length === 0" class="empty-state">
      <div class="empty-icon">
        <i class="fas fa-dumbbell"></i>
      </div>
      <h3>No programs found</h3>
      <p *ngIf="searchTerm || selectedCategory !== 'all'">
        Try adjusting your search or filters
      </p>
      <p *ngIf="!searchTerm && selectedCategory === 'all'">
        Create your first workout program to get started
      </p>
      <button class="btn btn-fitness" (click)="createNewProgram()">
        <i class="fas fa-plus me-2"></i>
        Create Your First Program
      </button>
    </div>

    <div *ngIf="!loading && filteredPrograms.length > 0" class="programs-grid">
      <div 
        *ngFor="let program of filteredPrograms" 
        class="program-card"
        (click)="viewProgram(program)">
        <div class="program-header">
          <div class="program-info">
            <h3 class="program-name">{{ program.name }}</h3>
            <p class="program-description" *ngIf="program.description">
              {{ program.description }}
            </p>
          </div>
          <!-- Removed program.difficulty badge -->
        </div>
        
        <div class="program-stats">
          <div class="stat-item">
            <i class="fas fa-dumbbell"></i>
            <span>{{ getProgramStats(program).exercises }} exercises</span>
          </div>
          <div class="stat-item">
            <i class="fas fa-clock"></i>
            <span>{{ getProgramStats(program).estimatedDuration }} min</span>
          </div>
          <div class="stat-item">
            <i class="fas fa-tag"></i>
            <span>{{ getProgramCategory(program) }}</span>
          </div>
        </div>
        
        <div class="program-actions">
          <button class="btn btn-outline-primary btn-sm" (click)="viewProgram(program); $event.stopPropagation()">
            <i class="fas fa-eye me-1"></i>
            View
          </button>
          <button class="btn btn-outline-secondary btn-sm" (click)="editProgram(program); $event.stopPropagation()">
            <i class="fas fa-edit me-1"></i>
            Edit
          </button>
          <button class="btn btn-outline-success btn-sm" (click)="duplicateProgram(program); $event.stopPropagation()">
            <i class="fas fa-copy me-1"></i>
            Duplicate
          </button>
          <button class="btn btn-outline-danger btn-sm" (click)="deleteProgram(program); $event.stopPropagation()">
            <i class="fas fa-trash me-1"></i>
            Delete
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Confirmation Dialogs -->
<app-confirm-dialog
  [isVisible]="showDeleteDialog"
  [data]="deleteDialogData"
  (confirm)="onConfirmDelete()"
  (cancel)="onCancelDelete()">
</app-confirm-dialog>

<app-duplicate-program-dialog
  *ngIf="showDuplicateDialog"
  [isVisible]="showDuplicateDialog"
  [data]="duplicateDialogData"
  (confirm)="onConfirmDuplicate($event)"
  (cancel)="onCancelDuplicate()"
  (close)="closeDuplicateDialog()">
</app-duplicate-program-dialog>
